(function(a){a.fn.ytChanPlayer=function(b){var c={major:0,minor:1,build:0},d=a(this),e,f=a("<ul/>",{"class":"yt-channel-list"}),g=a.extend({},{username:"",query:"",startIndex:1,maxResults:10,orderBy:"published",playerOpts:{autoplay:0,egm:1,autohide:1,fs:1,showinfo:0,wmode:"opaque"}},b),h=[],i=function(){var a="https://gdata.youtube.com/feeds/api/videos",b=["alt=json","orderby="+g.orderBy,"start-index="+g.startIndex,"max-results="+g.maxResults];if(g.username!==""){b.push("author="+g.username)}else if(g.query!==""){b.push("q="+encodeURIComponent(g.query))}return a+"?"+b.join("&")},j=function(b){if(b.length>0){if(!e){e=a("<iframe/>",{"class":"yt-player"})}var c="http://www.youtube-nocookie.com/embed/"+b,f;if(g.playerOpts){c+="?";for(f in g.playerOpts){if(g.playerOpts.hasOwnProperty(f)){c+=f+"="+g.playerOpts[f]+"&"}}c+="_a=b"}e.attr("src",c).prependTo(d)}},k=function(a){var b,c=parseInt(a,10);b=Math.floor(c/60);c-=b*60;return b+":"+c};d.addClass("yt-channel-holder");f.appendTo(d);a.getJSON(i(),function(b){var c,d,e,i;if(b.feed.entry){j(b.feed.entry[0].id.$t.match("[^/]*$"));for(c=0;c<b.feed.entry.length;c++){i=b.feed.entry[c];e={link:i?i.media$group.media$player[0].url:"",title:i?i.media$group.media$title.$t:"",thumb:i?i.media$group.media$thumbnail[1].url:"",duration:i?i.media$group.yt$duration.seconds:0,views:i&&i.yt$statistics?i.yt$statistics.viewCount:0,id:i?i.id.$t.match("[^/]*$"):""};d=a("<li/>",{"class":"yt-channel-video"}).html(['<a href="',e.link,'" title="',e.title," (",k(e.duration),')" target="_blank">','<img class="vid-thumb" alt="',e.title,'" src="',e.thumb,'"/>',"</a>"].join("")).data("id",e.id).click(function(b){b.preventDefault();g.playerOpts=a.extend(g.playerOpts,{autoplay:1});j(a(this).data("id"))}).css("opacity",".7").hover(function(){a(this).stop().animate({opacity:"1"},400)},function(){a(this).stop().animate({opacity:".7"},200)});h.push(e);d.appendTo(f)}}else{a("<li/>",{"class":"yt-channel-video"}).html("<a>NO RESULTS</a>").appendTo(f)}});return this}})(jQuery)
