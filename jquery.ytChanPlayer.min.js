/* jQuery Youtube Channel Player 0.2.0
 * Author: Marc LÃ¶he <marc@marcloehe.de>
 * Licensed under the MIT license.
 */
!function(e){"use strict";e.fn.ytChanPlayer=function(t){var a,n,s=e(this),l=e("<ul/>",{"class":"yt-channel-list"}),r=e.extend({},e.fn.ytChanPlayer.defaults,t),i=!1,o=[],p=function(t){var a="http://www.youtube.com/embed/"+t;return r.playerOpts&&(a+="?"+e.param(r.playerOpts)),a},u=function(t){t.length>0&&(a||(n=e("<div/>",{"class":"yt-player-wrapper"}),a=e("<iframe/>",{"class":"yt-player"}).prependTo(n),n.prependTo(s)),a.attr("src",p(t)),i=!0)},d=function(t){var a,n;a=e("<li/>",{"class":"yt-channel-video"}),n=e("<a/>",{href:t.embedUrl,title:t.title,target:"_blank","data-id":t.videoId}).appendTo(a),e("<img/>",{"class":"vid-thumb",alt:t.title,src:t.thumbnail}).appendTo(n),a.appendTo(l),o.push(t)},c=function(e){for(var t=Array.prototype.slice.call(arguments,1),a=0;a<t.length;a++){if(!e||!e.hasOwnProperty(t[a]))return!1;e=e[t[a]]}return!0};return s.addClass("yt-channel-holder"),l.on("click",".yt-channel-video a",function(t){t.preventDefault(),r.playerOpts=e.extend(r.playerOpts,{autoplay:1}),u(e(this).data("id"))}).appendTo(s),e.get("https://www.googleapis.com/youtube/v3/channels",{part:"contentDetails",key:r.apiKey,forUsername:r.username}).then(function(t,a,n){var s;return t.items&&t.items[0]&&c(t.items[0],"contentDetails","relatedPlaylists","uploads")?(s={part:"snippet",key:r.apiKey,playlistId:t.items[0].contentDetails.relatedPlaylists.uploads,maxResults:r.maxResults},e.get("https://www.googleapis.com/youtube/v3/playlistItems",s)):e.Deferred().reject(t,"Unable to fetch playlist items.",n).promise()}).then(function(t,a,n){return t.items&&t.items.length?void e.each(t.items,function(e,t){var a;return c(t,"snippet","resourceId","videoId")?(a={videoId:t.snippet.resourceId.videoId,title:t.snippet.title,thumbnail:t.snippet.thumbnails["default"].url},a.embedUrl=p(a.id),i||u(r.sticky||t.snippet.resourceId.videoId),void d(a)):!0}):e.Deferred().reject(t,"Unable to fetch playlist items.",n).promise()}).fail(function(e,t){r.debug&&console.log("Error: "+t)}),this},e.fn.ytChanPlayer.defaults={apiKey:"",username:"",maxResults:10,debug:!1,playerOpts:{autohide:1,autoplay:0,fs:1,showinfo:0}}}(jQuery);